<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MultiLipi Auth</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <style>
    body {
      height: 100vh;
      background: linear-gradient(135deg, #74ebd5 0%, #ACB6E5 100%);
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    .container-fluid {
      max-width: 1100px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
      overflow: hidden;
    }

    .auth-img {
        background: url('data:image/jpeg;base64,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') center/cover no-repeat;
        min-height: -10%;
        display: block;
    }

    .auth-form {
      padding: 40px;
    }

    .nav-tabs .nav-link.active {
      background-color: #007bff;
      color: white;
    }

    .message {
      text-align: center;
      margin-top: 10px;
      font-size: 14px;
    }

    .message.success { color: green; }
    .message.error { color: red; }

    .google-login-btn {
      margin-top: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: white;
      border: 1px solid #ddd;
      padding: 10px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .google-login-btn:hover {
      background: #f7f7f7;
    }

    .google-login-btn img {
      width: 20px;
      margin-right: 10px;
    }
  </style>
</head>
<body>
<div class="container-fluid row">
  <div class="col-md-6 auth-img d-none d-md-block"></div>
  <div class="col-md-6 auth-form">
    <ul class="nav nav-tabs mb-4" id="authTabs">
      <li class="nav-item">
        <button class="nav-link active" id="loginTab" onclick="toggleTab('login')">Login</button>
      </li>
      <li class="nav-item">
        <button class="nav-link" id="signupTab" onclick="toggleTab('signup')">Signup</button>
      </li>
    </ul>

    <div id="loginForm" class="form-section active">
      <div class="mb-3">
        <input type="email" id="loginEmail" class="form-control" placeholder="Email">
      </div>
      <div class="mb-3">
        <button class="btn btn-primary w-100" onclick="sendOtp('login')">Send OTP</button>
      </div>
      <div class="mb-3" id="loginOtpBlock" style="display: none;">
        <input type="text" id="loginOtp" class="form-control mb-2" placeholder="Enter OTP">
        <button class="btn btn-success w-100" onclick="verifyLogin()">Verify & Login</button>
      </div>
      <div class="google-login-btn" onclick="window.location.href='/auth/google'">
        <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google Logo">
        Continue with Google
      </div>
    </div>

    <div id="signupForm" class="form-section" style="display:none;">
      <div class="mb-3">
        <input type="email" id="signupEmail" class="form-control" placeholder="Email">
      </div>
      <div class="mb-3">
        <button class="btn btn-primary w-100" onclick="sendOtp('signup')">Send OTP</button>
      </div>
      <div class="mb-3" id="signupOtpBlock" style="display: none;">
        <input type="text" id="signupOtp" class="form-control mb-2" placeholder="Enter OTP">
        <input type="password" id="signupPassword" class="form-control mb-2" placeholder="Create Password">
        <button class="btn btn-success w-100" onclick="verifySignup()">Verify & Signup</button>
      </div>
    </div>

    <div class="message" id="message"></div>
  </div>
</div>

<script>
  function toggleTab(tab) {
    document.getElementById('loginTab').classList.remove('active');
    document.getElementById('signupTab').classList.remove('active');
    document.getElementById('loginForm').style.display = 'none';
    document.getElementById('signupForm').style.display = 'none';

    document.getElementById(tab + 'Tab').classList.add('active');
    document.getElementById(tab + 'Form').style.display = 'block';
    document.getElementById('message').textContent = '';
  }

  function sendOtp(type) {
    const email = document.getElementById(`${type}Email`).value;
    const button = document.querySelector(`#${type}Form button.btn-primary`);
    button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
    button.disabled = true;

    fetch('/auth/send_otp', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email })
    })
    .then(res => res.json())
    .then(data => {
      document.getElementById('message').textContent = data.message || data.error;
      document.getElementById('message').className = data.message ? 'message success' : 'message error';
      document.getElementById(`${type}OtpBlock`).style.display = 'block';
    })
    .finally(() => {
      button.innerHTML = 'Send OTP';
      button.disabled = false;
    });
  }

  function verifyLogin() {
    const email = document.getElementById('loginEmail').value;
    const otp = document.getElementById('loginOtp').value;
    fetch('/auth/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email, otp })
    })
    .then(res => res.json())
    .then(data => {
      document.getElementById('message').textContent = data.message || data.error;
      document.getElementById('message').className = data.message ? 'message success' : 'message error';
      if (data.redirect) window.location.href = data.redirect;
    });
  }

  function verifySignup() {
    const email = document.getElementById('signupEmail').value;
    const otp = document.getElementById('signupOtp').value;
    const password = document.getElementById('signupPassword').value;
    fetch('/auth/signup', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email, otp, password })
    })
    .then(res => res.json())
    .then(data => {
      document.getElementById('message').textContent = data.message || data.error;
      document.getElementById('message').className = data.message ? 'message success' : 'message error';
    });
  }
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
